{"version":3,"sources":["webpack:///./src/views/Ranking.vue?42a7","webpack:///src/views/Ranking.vue","webpack:///./src/views/Ranking.vue?c94d","webpack:///./src/views/Ranking.vue","webpack:///./src/views/Ranking.vue?a69f","webpack:///./src/views/Ranking.vue?5f2c"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_e","isLoading","on","changeTab","model","value","callback","$$v","active","expression","_l","item","n","key","name","tabClick","rankingData","id","index","n2","slot","_v","_s","shortTitle","directives","rawName","currentBook","staticRenderFns","components","Header","Nav","List","Loading","data","rankingTitle","currentTab","rankingBook","created","pageInit","watch","getRanking","methods","mask","message","index2","component"],"mappings":"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","file":"js/chunk-51741866.7ce40b23.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ranking\"},[_c('Header',{attrs:{\"title\":\"排行榜\",\"isLeft\":true,\"isRight\":true}}),(_vm.isLoading)?_c('Loading'):_vm._e(),(!_vm.isLoading)?_c('van-tabs',{attrs:{\"type\":\"card\"},on:{\"click\":_vm.changeTab},model:{value:(_vm.active),callback:function ($$v) {_vm.active=$$v},expression:\"active\"}},_vm._l((_vm.rankingTitle),function(item,n){return _c('van-tab',{key:n,attrs:{\"title\":item.name}},[_c('van-tabs',{attrs:{\"id\":\"ranking-tab\"},on:{\"click\":_vm.tabClick}},_vm._l((_vm.rankingData[item.id]),function(index,n2){return _c('van-tab',{key:n2},[_c('div',{staticClass:\"title\",attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"\\n              \"+_vm._s(index.shortTitle)+\"\\n            \")]),_c('List',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentBook),expression:\"currentBook\"}],attrs:{\"data\":_vm.currentBook,\"isBottom\":true}})],1)}),1)],1)}),1):_vm._e(),_c('Nav')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"ranking\">\n    <!-- 头部 -->\n    <Header title=\"排行榜\" :isLeft=\"true\" :isRight=\"true\"/>\n    <!-- 头部 end -->\n    <!-- 加载动画 -->\n    <Loading v-if=\"isLoading\"/>\n    <!-- 加载动画 end -->\n    <!-- 选项卡 -->\n    <van-tabs v-model=\"active\" type=\"card\" @click=\"changeTab\"  v-if=\"!isLoading\">\n      <van-tab v-for=\"(item, n) in rankingTitle\" :title=\"item.name\" :key=\"n\">\n         <van-tabs @click=\"tabClick\" id=\"ranking-tab\">\n            <van-tab v-for=\"(index, n2) in rankingData[item.id]\" :key=\"n2\">\n              <div slot=\"title\" class=\"title\">\n                {{ index.shortTitle }}\n              </div>\n              <List :data=\"currentBook\" v-show=\"currentBook\" :isBottom=\"true\"/>\n            </van-tab>\n         </van-tabs>\n      </van-tab>\n    </van-tabs>\n    <!-- 选项卡 end -->\n    <!-- 导航 -->\n    <Nav />\n    <!-- 导航 end -->\n  </div>\n</template>\n\n<script>\nimport Header from \"@/components/base/Header.vue\";\nimport Nav from \"@/components/base/Nav.vue\";\nimport Loading from \"@/components/base/Loading.vue\";\nimport List from \"@/components/List.vue\";\nimport { Toast } from \"vant\";\n\nexport default {\n  name: \"ranking\",\n  components: {\n    Header,\n    Nav,\n    List,\n    Loading\n  },\n  data() {\n    return {\n      active: 0,\n      isLoading: true,\n      rankingTitle: [\n        {\n          name: \"男生\",\n          id: \"male\",\n          index: 0\n        },\n        {\n          name: \"电子书\",\n          id: \"epub\",\n          index: 0\n        },\n        {\n          name: \"女生\",\n          id: \"female\",\n          index: 0\n        }\n      ],\n      rankingData: {},\n      currentTab: \"male\",\n      rankingBook: [],\n      currentBook: []\n    };\n  },\n  created() {\n    this.pageInit();\n  },\n  watch: {\n    rankingData: function() {\n      let id = this.rankingData[this.currentTab][0]._id;\n      this.getRanking(id);\n    }\n  },\n  methods: {\n    pageInit() {\n      this.getRanking();\n    },\n    tabClick(index2) {\n      Toast.loading({\n        mask: true,\n        message: \"加载中...\"\n      });\n      this.rankingTitle[this.active].index = index2;\n      let id = this.rankingData[this.currentTab][index2]._id;\n      this.getRanking(id);\n    },\n    changeTab(index2) {\n      Toast.loading({\n        mask: true,\n        message: \"加载中...\"\n      });\n      let n = this.rankingTitle[index2].index;\n      this.currentTab = this.rankingTitle[index2].id;\n      let id = this.rankingData[this.currentTab][n]._id;\n      this.getRanking(id);\n    },\n    async getRanking(id = \"\") {\n      if (id === \"\") {\n        let data = await this.axios.get(\"/ranking\");\n        if (data.flag === 1) {\n          Toast.clear();\n          this.rankingData = data.ranking;\n        } else {\n          Toast.clear();\n          Toast(data.msg);\n        }\n      } else {\n        // 缓存加载过的排行榜\n        if (this.rankingBook.length > 0) {\n          let arr = this.rankingBook.filter(el => {\n            return el.id == id;\n          });\n          if (arr.length > 0) {\n            this.currentBook = arr[0].book;\n            Toast.clear();\n            return;\n          }\n        }\n        let data = await this.axios.get(\"/ranking/\" + id);\n        if (data.flag === 1) {\n          Toast.clear();\n          this.rankingBook.push({\n            id,\n            book: data.ranking.books\n          });\n          this.currentBook = data.ranking.books;\n        } else {\n          Toast.clear();\n          Toast(data.msg);\n        }\n      }\n      setTimeout(() => {\n        this.isLoading = false;\n      }, 300);\n    }\n  }\n};\n</script>\n<style lang=\"scss\">\n.van-tabs--line .van-tabs__wrap {\n  height: 32px;\n}\n</style>\n\n\n<style scoped lang=\"scss\">\n.ranking {\n  min-height: 100%;\n  .van-loading {\n    margin-top: 56px;\n  }\n  .van-tabs {\n    margin-top: 56px;\n    .van-tabs {\n      margin-top: 0px;\n    }\n  }\n  .title {\n    line-height: 30px;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!./Ranking.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!./Ranking.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Ranking.vue?vue&type=template&id=253d1520&scoped=true&\"\nimport script from \"./Ranking.vue?vue&type=script&lang=js&\"\nexport * from \"./Ranking.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Ranking.vue?vue&type=style&index=0&lang=scss&\"\nimport style1 from \"./Ranking.vue?vue&type=style&index=1&id=253d1520&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.7.1@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"253d1520\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/_mini-css-extract-plugin@0.6.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/_vue-loader@15.7.1@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/_sass-loader@7.2.0@sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!./Ranking.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/_mini-css-extract-plugin@0.6.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/_vue-loader@15.7.1@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/_sass-loader@7.2.0@sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!./Ranking.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../node_modules/_mini-css-extract-plugin@0.6.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/_vue-loader@15.7.1@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/_sass-loader@7.2.0@sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!./Ranking.vue?vue&type=style&index=1&id=253d1520&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/_mini-css-extract-plugin@0.6.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/_vue-loader@15.7.1@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/_sass-loader@7.2.0@sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!./Ranking.vue?vue&type=style&index=1&id=253d1520&scoped=true&lang=scss&\""],"sourceRoot":""}